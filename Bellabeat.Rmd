---
title: "Smart Data, Smart Growth: A Bellabeat Case Study"
author: "Mercy Nwaodu"
date: "2024-07-09"
output: html_document
---

# Introduction

Founded in 2013 by Urška Sršen and Sando Mur, Bellabeat is a high-tech company that creates beautifully designed, health-focused smart products for women. By collecting data on activity, sleep, stress, and reproductive health, Bellabeat empowers women with knowledge about their own health and habits. The company quickly positioned itself as a tech-driven wellness leader, opening offices globally and launching multiple products by 2016. Bellabeat's products are available through various online retailers and their own e-commerce site. While investing in traditional advertising, Bellabeat extensively focuses on digital marketing, utilizing Google Search, social media platforms, and video and display ads to engage consumers and support key marketing campaigns.

This case study aims to analyze smart device fitness data for Bellabeat's products to uncover consumer usage patterns. The goal is to identify new growth opportunities and provide strategic recommendations to enhance Bellabeat’s marketing strategy and market positioning.

# Phase 1: Ask
The primary business task is to analyze smart device fitness data from Bellabeat’s products to uncover insights into consumer usage patterns. These insights will inform Bellabeat’s marketing strategy, aiming to increase user engagement, product usage, and ultimately drive sales growth.

### *Key Stakeholders*

* **Urška Sršen**: Bellabeat’s co-founder and Chief Creative Officer;

* **Sando Mur:** A mathematician and Bellabeat’s cofounder; 

* **Bellabeat Marketing Analytics Team:** Guides Bellabeat's Marketing Strategy

# Phase 2: Prepare

* **Dataset**: Data used is Fitbit Fitness Tracker data, available on Kaggle through [Mobius](https://www.kaggle.com/datasets/arashnic/fitbit)

* **Data Storage:**Upon download, the dataset is stored in a local folder for ease of accessibility from RStudio desktop

* **Data Organization:** Data is organized in long format as it has more rows than columns, with each row representing data from a unique user

* **Data Bias or Credibility:** The dataset bias or credibility is quite questionable. It is not original because it was generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Additionally, it does not seem to be comprehensive as it contains dataset from only 30 users. It is however current as it was updated four months ago

* **Data Licensing/Accessibility:** The data is located in Kaggle, a public domain and open source with no usage restrictions, it is also licensed under the CC0: Public Domain.

* **Data Integrity:** The dataset lacks adequate integrity due to the absence of metadata. Although it offers some insights into the business problem.

* **Data Sorting/Filtering:** Four (4) datasets will be used for further analysis as some had hither to been merged. 

# Phase 3: Process
Using R in the data analysis, the following steps were taken to process available data

### *Installing and loading common packages and libraries*
The packages were first installed, after which, they were loaded for use:

```{r}
library(tidyverse)
library(skimr)
library(janitor)
library(lubridate)
library(here)
library(dplyr)
```

### *Loading CSV files*

Data frames were created and read for each file from the loaded dataset

```{r}
daily_activity <- read_csv("bellabeat_data/dailyActivity_merged.csv")
hourly_intensities <- read_csv("bellabeat_data/hourlyIntensities_merged.csv")
heart_rate <- read_csv("bellabeat_data/heartrate_seconds_merged.csv")
weight_info <- read_csv("bellabeat_data/weightLogInfo_merged.csv")
```

### *Data Exploration*

The data frames were previewed using the `head()` and `glimpse()` functions 

```{r}
head(daily_activity)
glimpse(daily_activity)

head(hourly_intensities)
glimpse(hourly_intensities)

head(heart_rate)
glimpse(heart_rate)

head(weight_info)
glimpse(weight_info)
```

The **columns names** for each dataset were identified using `colnames()` function

```{r}
colnames(daily_activity)
colnames(hourly_intensities)
colnames(heart_rate)
colnames(weight_info)
```

Furthermore, the **number of rows** in each dataframe was identified using the `nrow()` function

```{r}
nrow(daily_activity)
nrow(hourly_intensities)
nrow(heart_rate)
nrow(weight_info)
```

### *Data Formatting and Cleaning*

To ensure consistency across the dataset, the date and time were formatted using the `lubridate()` function to ensure uniformity in data type

```{r}
daily_activity$ActivityDate <- mdy(daily_activity$ActivityDate)
head(daily_activity)

hourly_intensities$ActivityHour <- mdy_hms(hourly_intensities$ActivityHour)
head(hourly_intensities)

heart_rate$Time <- mdy_hms(heart_rate$Time)
head(heart_rate)

weight_info$Date <- mdy_hms(weight_info$Date)
head(weight_info)
```


Number of observations as checked using the `nrow()` function after which the `sum(duplicated())` function was used to identify duplicates. No duplicates were found

```{r}
nrow(daily_activity)
nrow(hourly_intensities)
nrow(heart_rate)
nrow(weight_info)


sum(duplicated(daily_activity))
sum(duplicated(hourly_intensities))
sum(duplicated(heart_rate))
sum(duplicated(weight_info))
```

Dataset with missing or zero values were excluded to reduce data skewness during the analysis

```{r}
daily_activity <- daily_activity %>% filter(TotalSteps !=0)
daily_activity <- daily_activity %>% filter(TotalDistance !=0)
```


The amount of **unique participants** in each dataframe was observed using the `n_distinct()` function.

```{r}
n_distinct(daily_activity$Id)
n_distinct(hourly_intensities$Id)
n_distinct(heart_rate$Id)
n_distinct(weight_info$Id)
```

# Phase 4: Analyze

Each data set was summarized and valuable insight was extracted

```{r}
daily_activity %>%  
  select(TotalSteps,
         TotalDistance,
         VeryActiveMinutes,
         FairlyActiveMinutes,
         LightlyActiveMinutes,
         SedentaryMinutes,
         Calories) %>%
  summary()

hourly_intensities %>%  
  select(TotalIntensity) %>%
  summary()

heart_rate %>%  
  select(Value) %>%
  summary()

weight_info %>%  
  select(WeightKg, BMI) %>%
  summary()

```

The following insights were observed:

* An average step of 7593 per day is indicative of [low activity](https://pubmed.ncbi.nlm.nih.gov/14715035/), covering a mean distance of 5.4 on a daily basis

* Majority of participants engaged in light activity with a mean value of 197 minutes spent on these activities

* Users spent more time on sedentary activities characterized by lesser physical activity. On an average, about 939 minutes was spent on this activity which may be due to the job demand of these individuals

* On average, users burned a mean of 2,288 calories daily.

* The normal resting  [heart rate](https://www.mayoclinic.org/healthy-lifestyle/fitness/expert-answers/heart-rate/faq-20057979) is 60 - 100 beats per minutes. This is evident in the average heart rate of 79 observed in this population

* A mean BMI of 25.7 found in this population falls within the [overweight](https://www.cdc.gov/healthyweight/assessing/index.html) BMI category with a maximum value of 46.2

* An average weight of 72 kg is less informative without accounting for factors like age and gender, which greatly impact weight distribution in this population

# Phase 5: Share

Visualizations which are clear to stakeholders will be used to effectively present insights.

### *Total Distance vs Calories Expended*

From the graph, there exist a positive correlation an increase in number of calories expended as the distance covered increases

```{r}
ggplot(data = daily_activity, aes(TotalDistance, Calories)) +
  geom_point() + 
  geom_smooth(method = "lm", se = FALSE, color = "#CC3366") + 
  geom_jitter() + 
  labs(title = "Relationship Between Total Distance and Calories Expended",
       x = "Total Distance",
       y = "Calories Expended")
```

### *Average Daily Steps Distribution*

The bar chart reveals a predominant mode in the 'Sedentary' category within the dataset, highlighting widespread sedentary behavior among participants.

```{r}
# Calculate the average daily steps for each user
user_averages <- daily_activity %>%
  group_by(Id) %>%
  summarise(AverageSteps = mean(TotalSteps))

# Classify the average steps into activity levels
user_averages <- user_averages %>%
  mutate(ActivityLevel = case_when(
    AverageSteps < 5000 ~ "Sedentary",
    AverageSteps >= 5000 & AverageSteps < 7500 ~ "Lightly Active",
    AverageSteps >= 7500 & AverageSteps < 10000 ~ "Fairly Active",
    AverageSteps >= 10000 & AverageSteps < 12500 ~ "Active",
    AverageSteps >= 12500 ~ "Highly Active"
  ))

# Summarize the data by ActivityLevel
activity_summary <- user_averages %>%
  group_by(ActivityLevel) %>%
  summarise(Count = n())

# Convert ActivityLevel to a factor with specified order
activity_summary <- activity_summary %>%
  mutate(ActivityLevel = factor(ActivityLevel, levels = c("Sedentary", "Lightly Active", "Fairly Active", "Active", "Highly Active")))

# Creating the bar chart
ggplot(activity_summary, aes(x = ActivityLevel, y = Count, fill = ActivityLevel)) +
  geom_bar(stat = "identity") +
  labs(title = "Activity Levels Based on Average Daily Steps Taken",
       x = "Activity Level",
       y = "Number of Individuals") +
  scale_fill_manual(values = c("Sedentary" = "#CC3366", "Lightly Active" = "#9b5de5", "Fairly Active" = "#fee440", "Active" = "#00f5d4", "Highly Active" = "#00bbf9")) +
  theme_minimal()

```


### *Heart Rate Distribution*

The data shows that about 78% of users maintain a normal heart rate, suggesting they engage in healthy levels of physical activity. In contrast, 12% exhibit high heart rates, possibly due to vigorous activity or stress. Additionally, 10% exhibit low heart rates, indicating more sedentary or low-intensity activities. This diversity reflects varying levels of physical exertion and stress among users throughout the day.

```{r}
# Mutate to create the HeartRateLevel column
heart_rate <- heart_rate %>%
  mutate(HeartRateLevel = case_when(
    Value < 60 ~ "Low",
    between(Value, 60, 100) ~ "Normal",
    Value > 100 ~ "High"
  ))

# Summarize the data by HeartRateLevel and calculate percentages
heart_rate_summary <- heart_rate %>%
  group_by(HeartRateLevel) %>%
  summarise(Count = n()) %>%
  mutate(Percentage = (Count / sum(Count)) * 100)

# Extract percentages and labels for the pie chart
labels <- heart_rate_summary$HeartRateLevel
percents <- heart_rate_summary$Percentage

# Create custom colors
colors <- c("Low Rate" = "#21b0fe", "Normal Rate" = "#fed700", "High Rate" = "#ee4266")

# Create the pie chart using pie()
pie(percents, labels = paste(labels, "\n", round(percents), "%"), col = colors, main = "Heart Rate Distribution")


```

### *BMI Categorization*

Majority of users fall within the healthy weight category. None was underweight and only a fraction was obese.

```{r}

# Mutate to create the BMICategory column
weight_info <- weight_info %>%
  mutate(BMICategory = case_when(
    BMI < 18.5 ~ "Underweight",
    between(BMI, 18.5, 24.9) ~ "Healthy Weight",
    between(BMI, 25.0, 29.9) ~ "Overweight",
    BMI >= 30.0 ~ "Obese"
  ))

# Summarize the data by BMICategory and calculate counts
bmi_summary <- weight_info %>%
  group_by(BMICategory) %>%
  summarise(Count = n())

# Define custom colors for the bar chart
colors <- c("Underweight" = "#70d6ff", "Healthy Weight" = "#06d6a0", "Overweight" = "#ff9770", "Obese" = "#ff70a6")

# Create the horizontal bar chart
ggplot(bmi_summary, aes(x = Count, y = reorder(BMICategory, Count), fill = BMICategory)) +
  geom_bar(stat = "identity") +
  labs(title = "BMI Categorization",
       x = "Number of Individuals",
       y = "BMI Category") +
  scale_fill_manual(values = colors) +
  theme_minimal()
```


# Phase 6: Act

Based on insights from the user data presented, the following recommendations are made to improve Bellabeat marketing strategy:

* Reward system such as milestone celebration, points which can be used to obtain other product discount etc.  can be incorporated to promote app usage, increase activity which in turn improve health of user

* Notification/reminders to notify users when their sedentary level is increasing

* Educational section to let users now what these numbers mean and their health implications

* Creation of online teams for accountability purpose and support

* Partnership with health organizations e.g. gym where users can be referred to at reduced cost when necessary
